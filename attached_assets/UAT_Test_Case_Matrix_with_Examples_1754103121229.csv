Test Case ID,Title,Trigger,Input Example,Expected Outcome
UAT-01,Document Creation via SugarCRM Button,HTTP POST from SugarCRM to /api/documents/create,"{""record_id"": ""oppty_1234"", ""tenant_id"": ""tenant_xyz"", ""api_key"": ""valid_key""}","Middleware pulls SugarCRM data, creates document in PandaDoc, returns doc ID or URL"
UAT-02,Handle PandaDoc Webhook - Document Signed,Webhook from PandaDoc with 'document.state_changed',"{""event"": ""document.state_changed"", ""data"": {""status"": ""document.completed"", ""metadata"": {""record_id"": ""oppty_1234"", ""tenant_id"": ""tenant_xyz""}}}","Middleware identifies tenant, attaches signed PDF to SugarCRM record, updates sales_stage"
UAT-03,Reject Invalid API Key,POST request from SugarCRM,"{""record_id"": ""oppty_1234"", ""tenant_id"": ""tenant_xyz"", ""api_key"": ""invalid_key""}",Middleware returns 401 Unauthorized error
UAT-04,Reject Webhook with Missing Tenant ID,Webhook from PandaDoc,"{""event"": ""document.state_changed"", ""data"": {""status"": ""document.completed"", ""metadata"": {}}}",Middleware logs and returns 400 Bad Request or 403 Forbidden
UAT-05,Map Tokens Correctly from SugarCRM to PandaDoc,POST to /api/documents/create,"{""record_id"": ""oppty_5678"", ""tenant_id"": ""tenant_xyz""}","Mapped fields (e.g., opportunity.name â†’ {{opportunity_name}}) appear correctly in created doc"
UAT-06,Attach Signed PDF to SugarCRM,Webhook from PandaDoc,"{""event"": ""document.completed"", ""data"": {""metadata"": {""record_id"": ""oppty_5678"", ""tenant_id"": ""tenant_xyz""}}}",Middleware downloads signed doc from PandaDoc and uploads to correct SugarCRM record
UAT-07,Validate Field Mappings are Tenant-Specific,Create document for two different tenants,"[{""tenant_id"": ""tenant_xyz"", ""record_id"": ""oppty_1""}, {""tenant_id"": ""tenant_abc"", ""record_id"": ""oppty_2""}]",Each document uses correct field mappings according to tenant config
UAT-08,Webhook If-Then-Else Logic - Update Status,Webhook from PandaDoc,"{""event"": ""document.state_changed"", ""data"": {""status"": ""document.viewed"", ""metadata"": {""record_id"": ""oppty_7890"", ""tenant_id"": ""tenant_xyz""}}}","If document viewed, update SugarCRM status field to 'Viewed'"
UAT-09,Return List of Available Tokens for Template,GET request to /api/tokens/list,?record_id=oppty_9999&tenant_id=tenant_xyz,"Middleware returns list of merge tokens (e.g., {{opportunity_name}}, {{close_date}})"
UAT-10,Inactive Workflow Rule Skipped,Webhook triggers inactive workflow,"{""event"": ""document.state_changed"", ""data"": {""status"": ""document.completed"", ""metadata"": {""record_id"": ""oppty_1234"", ""tenant_id"": ""tenant_xyz""}}}",Workflow is skipped and no action is taken if isActive is false
